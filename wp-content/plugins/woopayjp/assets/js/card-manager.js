!function(o){"use strict";function a(a,e){var n=o('<div class="woopayjp-msg"><p></p><a href="#">&times;</a></div>');e&&n.addClass("woopayjp-msg--error"),n.find("p").text(a),o("#woopayjp-add-card-form").before(n),setTimeout(function(){n.remove()},1e4)}o(document).on("click",".delete-cc",function(a){a.preventDefault();var e=o(this).parents(".my_woopayjp_cc"),n=o(this).parents("tr"),t=o(this).attr("data-card-id");window.confirm(WooPayJpCC.confirm)&&(e.block({message:null,overlayCSS:{background:"#fff url("+WooPayJpCC.ajaxLoaderImage+") no-repeat center",opacity:.6}}),o.get(WooPayJpCC.endpoint,{action:WooPayJpCC.action_delete,_wpnonce:WooPayJpCC.nonce,card_id:t}).done(function(a){a.success?(n.remove(),e.find("tbody tr").length||o(".my_woopayjp_cc__table").addClass("my_woopayjp_cc--empty")):window.alert(a.message)}).fail(function(){window.alert(WooPayJpCC.failureDelete)}).always(function(){e.unblock()}))}),o(document).on("click",".woopayjp-msg a",function(a){a.preventDefault(),o(this).parents(".woopayjp-msg").remove()}),WooPayJpCC.submit=function(){var e=o("#woopayjp-add-card-form"),n=o(".my_woopayjp_cc");n.block({message:null,overlayCSS:{background:"#fff url("+WooPayJpCC.ajaxLoaderImage+") no-repeat center",opacity:.6}}),o.post(WooPayJpCC.endpoint,{action:WooPayJpCC.action_add,_wpnonce:WooPayJpCC.nonce,payjp_token:o("#payjp_checkout_box input[name=payjp-token]").val()}).done(function(n){n.success?(o(".my_woopayjp_cc tbody").append(n.html),e.find("input[type=text]").val(""),o(".my_woopayjp_cc__table").removeClass("my_woopayjp_cc--empty")):a(n.message,!0)}).fail(function(){a(WooPayJpCC.failureAdd,!0)}).always(function(){n.unblock();var a=o("#payjp_checkout_box");a.find("input[name=payjp-token]").val(""),a.find("input[type=button]").removeClass("has-token").val(WooPayJpCC.button_text)})},WooPayJpCC.errorHandler=function(o,e){a(e,!0)}}(jQuery),window.wooPayJpCardSubmit=function(o){WooPayJpCC.submit()},window.wooPayJpCardFailed=function(o,a){WooPayJpCC.errorHandler(o,a)};
//# sourceMappingURL=map/card-manager.js.map
