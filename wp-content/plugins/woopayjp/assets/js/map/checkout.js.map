{"version":3,"sources":["checkout.js"],"names":["$","document","on","this","val","addClass","removeClass","isApplePayAvailable","Payjp","applePay","checkAvailability","available","window","console","log","PayjpVars","pubkey","e","preventDefault","request","countryCode","currencyCode","total","label","attr","amount","parseInt","session","buildSession","result","token","id","cardReady","completePayment","ApplePaySession","STATUS_SUCCESS","err","error","code","alert","unacceptable","applePayFails","begin","ready","PayjpCheckout","initialize","jQuery"],"mappings":"CAOA,SAAWA,GAET,YAEAA,GAAEC,UAAUC,GAAG,SAAU,qBAAsB,WACzCF,EAAEG,MAAMC,MACVJ,EAAE,qBAAqBK,SAAS,UAEhCL,EAAE,qBAAqBM,YAAY,WAKvC,IAAIC,IAAsB,CAC1BC,OAAMC,SAASC,kBAAkB,SAASC,GACxCJ,EAAsBI,EAClBA,GAGCC,OAAOC,SACRA,QAAQC,IAAI,+BAAiCC,UAAUC,UAM7DhB,EAAEC,UAAUC,GAAG,QAAS,oBAAqB,SAASe,GACpDA,EAAEC,gBACF,IAAIC,IACFC,YAAa,KACbC,aAAc,MACdC,OACEC,MAAOvB,EAAEG,MAAMqB,KAAK,oBACpBC,OAAQC,SAAU1B,EAAEG,MAAMqB,KAAK,uBAG/BG,EAAUnB,MAAMC,SAASmB,aAAaT,EAAS,SAASU,GAC1D7B,EAAE,6BAA6BI,IAAKyB,EAAOC,MAAMC,IACjD/B,EAAE,0CAA0CK,SAAS,aAAaD,IAAI,KAAOW,UAAUiB,WACvFL,EAAQM,gBAAgBC,gBAAgBC,iBACxC,SAASC,GAENA,EAAIC,OAAS,uBAAyBD,EAAIC,MAAMC,KACjDC,MAAMxB,UAAUyB,cAEhBD,MAAMxB,UAAU0B,eAEf7B,OAAOC,SACRA,QAAQC,IAAIsB,IAGhBT,GAAQe,UAGV1C,EAAEC,UAAU0C,MAAM,WAEhB3C,EAAE,QAAQE,GAAG,mBAAoB,WAC3BU,OAAOgC,eACTA,cAAcC,kBAKnBC","file":"../checkout.js","sourcesContent":["/**\n * Description\n */\n\n/*global PayjpCheckout: false*/\n/*global PayjpVars: false*/\n\n(function ($) {\n\n  'use strict';\n\n  $(document).on('change', '#payjp-card-select', function () {\n    if ($(this).val()) {\n      $('#woopayjp-cc-info').addClass('toggle');\n    } else {\n      $('#woopayjp-cc-info').removeClass('toggle');\n    }\n  });\n\n  // Apple pay availability.\n  var isApplePayAvailable = false;\n  Payjp.applePay.checkAvailability(function(available){\n    isApplePayAvailable = available;\n    if (available) {\n      // Available.\n    } else {\n      if(window.console){\n        console.log('Apple Pay is not available: ' + PayjpVars.pubkey);\n      }\n    }\n  });\n\n  // Click apple pay.\n  $(document).on('click', '#apple-pay-button', function(e) {\n    e.preventDefault();\n    var request = {\n      countryCode: 'JP',\n      currencyCode: 'JPY',\n      total: {\n        label: $(this).attr('data-order-label'),\n        amount: parseInt( $(this).attr('data-order-total') )\n      }\n    };\n    var session = Payjp.applePay.buildSession(request, function(result){\n      $('input[name=\"payjp-token\"]').val( result.token.id );\n      $('#payjp_checkout_box input[type=button]').addClass('has-token').val('âœ” ' + PayjpVars.cardReady);\n      session.completePayment(ApplePaySession.STATUS_SUCCESS);\n    },function(err) {\n      // Check error message.\n      if(err.error && 'unacceptable_brand' === err.error.code){\n        alert(PayjpVars.unacceptable);\n      }else{\n        alert(PayjpVars.applePayFails);\n      }\n      if(window.console){\n        console.log(err);\n      }\n    });\n    session.begin();\n  } );\n\n  $(document).ready(function () {\n    // Cart refresh.\n    $('body').on('updated_checkout', function () {\n      if (window.PayjpCheckout) {\n        PayjpCheckout.initialize();\n      }\n    });\n  });\n\n})(jQuery);\n"]}